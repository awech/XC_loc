

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Introduction &mdash; enveloc 1.0.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. enveloc Installation" href="installation.html" />
    <link rel="prev" title="enveloc" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> enveloc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#background">1.1. Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#location">1.2. Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uncertainty">1.3. Uncertainty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#applications">1.4. Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detection">1.5. Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limitations">1.6. Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">2. enveloc Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">3. Usage overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">4. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">5. Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="xcor.html">6. <em>XCOR</em> object</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_list.html">7. <em>event_list</em> object</a></li>
<li class="toctree-l1"><a class="reference internal" href="detections.html">8. <em>detections</em> object</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">enveloc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">1. </span>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1><span class="section-number">1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<div class="section" id="background">
<h2><span class="section-number">1.1. </span>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p><em>enveloc</em>, first and foremost, is a <strong>location tool</strong>.</p>
<p>The envelope cross correlation approach and underlying algorithms in <em>enveloc</em> were originally written
for the automatic detection and location of tectonic tremor in the Pacific Northwest of the US.
These codes have been used operationally at the <a href="https://pnsn.org/" target="_blank">Pacific Northwest Seismic Network</a> since 2009 to automatically catalog
<a href="https://pnsn.org/tremor" target="_blank">tremor there</a>. This origin leads to the assumption that the package serves as a tremor detector,
which this is a mischaracterization. The code <em>can</em> be used that way, but it doesn’t have to be.</p>
<p>The envelope cross correlation method is not limited to locating tremor sources, but can be applied
to <em>any</em> seismic source, including earthquakes. It is not always the best choice for locating a source.
Obviously earthquakes are better located with traditional earthquake location routines using <em>P</em> and <em>S</em>
arrival picks. But in cases where picking an onset or arrival is impossible because</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A high noise floor masks onset times</p></li>
<li><p>The underlying source process results in an emergent signal</p></li>
<li><p>The signal is continuous</p></li>
</ol>
</div></blockquote>
<p><em>enveloc</em> is a tool to help constrain the source location.</p>
</div>
<div class="section" id="location">
<h2><span class="section-number">1.2. </span>Location<a class="headerlink" href="#location" title="Permalink to this headline">¶</a></h2>
<p>Locating relies on a grid search. For each node in a 3D grid, the theoretical traveltimes are calculated to
each station provided, which results in a predicted differential traveltime for each station pair. The algorithm
seeks to maximize network coherency by finding the grid node that minimizes the difference between the maximum
correlation between two stations and the correlation value associated with the predicted differential travelitme:</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="_images/enveloc_method.png"><img alt="_images/enveloc_method.png" src="_images/enveloc_method.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Example normalized cross correlogram between the envelopes of stations <img class="math" src="_images/math/4beb4858fd47cbeee3a992f0d65c3bd7dc1464de.svg" alt="i"/> and <img class="math" src="_images/math/d6e98dc174d3a60846708e3cfa21b2f464daf6a1.svg" alt="j"/>
as a function of lag time <img class="math" src="_images/math/b0c8f1837f60759bf4fa2542133e317bf30619c0.svg" alt="{\delta}t"/>. The correlogram <img class="math" src="_images/math/f3a015abcb810e72cf301173cb0ea221eea4b333.svg" alt="C_{ij}"/> evaluated at  the differential <em>S</em>-wave travel time <img class="math" src="_images/math/fda960cefbb5d85eca8f4e88c551fc2c33ee219a.svg" alt="{\delta}t_{ij}(x^{grid})"/> results in the predicted cross correlation for that grid node <img class="math" src="_images/math/48ec830df1a146192d74a23183b6395299fa096d.svg" alt="C_{ij}[{\delta}t_{ij}(x^{grid})]"/>.
The algorithm minimizes the vertical correlation distance by minimizing the sum over station pairs of
<img class="math" src="_images/math/7115a7660fe63a662260fd251d5a1c847fb0cb4d.svg" alt="\sum[{C_{ij}^{max} - C_{ij}[{\delta}t_{ij}(x^{grid})]}]"/> inversely weighted by its uncertainty
<img class="math" src="_images/math/f54078f68ccf752e1d3b778a6a4c6c29425169a1.svg" alt="{\Delta}C_{ij}^{max}"/>. See
<a href="https://agupubs.onlinelibrary.wiley.com/doi/full/10.1029/2008GL035458" target="_blank">Wech & Creager, 2008</a> for more details.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
<div class="legend">
</div>
</div>
<p>A channel that doesn’t correlate with any other channels above the minimum threshold does not contribute
to the location. If a channel only correlates with a subset of other channels above the minimum threshold, then
only those relevant correlations contribute.</p>
</div>
<div class="section" id="uncertainty">
<span id="uncertainty-summary"></span><h2><span class="section-number">1.3. </span>Uncertainty<a class="headerlink" href="#uncertainty" title="Permalink to this headline">¶</a></h2>
<p>Uncertainty is certainly poorly constrained. The code can perform a bootstrap test for each location by randomly
removing a small percentage of the cross correlations <em>N</em> times, resulting in <em>N</em> locations. The scatter of those
<em>N</em> locations is indicative of how stable the overall location (using all the data) is, but the scatter does NOT
represent a true uncertainty estimate. For example, repeated location attempts with a subset of the data can result in
a source estimate at the same grid node over and over again. In that case the scatter would be 0 km, which obviously
does not reflect the true error. In general I tend to ignore vertical scatter and to discard locations where
the horizontal scatter is greater than 5 km.</p>
</div>
<div class="section" id="applications">
<h2><span class="section-number">1.4. </span>Applications<a class="headerlink" href="#applications" title="Permalink to this headline">¶</a></h2>
<p>A few examples:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Locating a single event</dt><dd><p>For a single discrete-ish event surrounded by a seismic network, filtering the data and passing them as envelopes
to <em>enveloc</em> with an appropriate velocity model will help provide a quick and dirty location estimate. This can
even be done interactively in <em>enveloc</em> allowing the user to select and remove stations and relocate to understand
the effects of different stations and data quality</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Finding volcanic seismicity</dt><dd><p><em>enveloc</em> could be run periodically on continuous seismic data from a volcano network to routinely search for volcanic
seismicity, which could include long-period events, tremor and earthquakes. Externally, the results could then
be cataloged or even alarmed.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Tectonic tremor</dt><dd><p><em>enveloc</em> was orignally designed to search through continuous data and attempt a location on overlapping 5-minute
windows. <em>enveloc</em> allows you to input long data streams, and internally it will iterate through user-defined window
slices and attempt to a location for each one. The output can serve as the first step in detecting tremor
(more on that below).</p>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="detection">
<span id="detection-summary"></span><h2><span class="section-number">1.5. </span>Detection<a class="headerlink" href="#detection" title="Permalink to this headline">¶</a></h2>
<p>One of <em>enveloc</em>’s strengths is its ability to automatically attempt the location of 100s or 1000s of short windows
within a longer data stream. During this process though, <em>enveloc</em> will identify any coherent seismic signal, so any
successful location is considered a detection. As discussed above, this could be <em>anything</em>. So by itself, the
output of 100s or 1000s of locations may or may not represent seismicity of interest. For tectonic tremor detection,
a secondary process is required. <em>enveloc</em> includes a method that starts with all those locations, and applies a
clustering algorithm to check for spatio-temporal clustering that is more indicative of tremor-like activity.
The result is seismicity that clusters in space and time, but still, that may or may not be tremor. It could also
be an earthquake swarm or a mainshock-aftershock sequence. Background earthquake activity is important, as is the
nature of the possible tremor signal itself (does it last for hours per day, or is it just a few minutes per month?).
I find there’s no subsitute for looking at the data.</p>
</div>
<div class="section" id="limitations">
<h2><span class="section-number">1.6. </span>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Envelope cross correlation is not always the best method to use, and using <em>enveloc</em> has its drawbacks:</p>
<ol class="arabic simple">
<li><p>Creating envelopes inherently degrades temporal resolution, which will affect the resulting spatial
resolution. Horizontal uncertainty is briefly discussed above in the <a class="reference internal" href="#uncertainty-summary"><span class="std std-ref">Uncertainty</span></a>
section, but envelopes particularly impact depth resolution. In general, depth output should be viewed
as an approximate guide. The code can distinguish between something happening at the surface and
something 10, 25 or 40 km deep, and systematic differences in many locations may have meaning. But
beyond that it is probably unwise to overinterpret.</p></li>
<li><p>Because location is based on a grid search, the code will always provide a solution. As discussed in the <a class="reference internal" href="#detection-summary"><span class="std std-ref">Detection</span></a>
section above, this means care must be taken when interpreting the output.</p></li>
<li><p>The code does not work on signals with little amplitude variation. In this case there’s little structure for the
envelopes correlate.</p></li>
<li><p>Issues can arise when the start or end of a window is in the middle of a high-amplitude event. In this case
all stations correlate well with essentially zero lag, which erroneously places the event in the middle of the
network. There is a flag that searches for this scenario, but it isn’t fool proof</p></li>
<li><p><strong>AUTOMATION IS HARD.</strong> <em>enveloc</em> has a lot of internal checks and quality-control measures to try and handle the most
conspicuous gotchas, but nothing is bulletproof. Even traditional earthquake locations (which we’ve known how to
do for a long time now) require a human analyst. Trying to automate the detection and location of messy seimsicity
requires and iterative approach that necessitates looking at the data.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="2. enveloc Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="enveloc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Aaron Wech

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>